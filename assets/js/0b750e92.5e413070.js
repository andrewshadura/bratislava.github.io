"use strict";(self.webpackChunkbratislava_github_io=self.webpackChunkbratislava_github_io||[]).push([[5764],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(r),m=a,b=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return r?n.createElement(b,i(i({ref:t},c),{},{components:r})):n.createElement(b,i({ref:t},c))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},7628:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=r(7462),a=(r(7294),r(3905));const o={},i="Load Production or Staging database dump in local development",l={unversionedId:"recipes/load-strapi-db-in-local-dev",id:"recipes/load-strapi-db-in-local-dev",title:"Load Production or Staging database dump in local development",description:"You'll need access to our Azure Devops project o access the database dumps",source:"@site/docs/recipes/load-strapi-db-in-local-dev.md",sourceDirName:"recipes",slug:"/recipes/load-strapi-db-in-local-dev",permalink:"/docs/recipes/load-strapi-db-in-local-dev",draft:!1,editUrl:"https://github.com/bratislava/bratislava.github.io/edit/master/docs/recipes/load-strapi-db-in-local-dev.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Kubernetes / Lens setup",permalink:"/docs/recipes/kubernetes-lens-setup"},next:{title:"Setup Postgres & tools",permalink:"/docs/recipes/postgres-setup"}},s={},p=[],c={toc:p};function d(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"load-production-or-staging-database-dump-in-local-development"},"Load Production or Staging database dump in local development"),(0,a.kt)("p",null,"You'll need access to our ",(0,a.kt)("a",{parentName:"p",href:"https://dev.azure.com/bratislava-innovation/Inovacie"},"Azure Devops project")," o access the database dumps"),(0,a.kt)("p",null,"You can then use the ",(0,a.kt)("a",{parentName:"p",href:"https://dev.azure.com/bratislava-innovation/Inovacie/_build?definitionId=28"},"db-backup pipeline")," to browse recent backups on different k8s deployed projects. Each run produces an artifact in which you'll find the db dump."),(0,a.kt)("p",null,"In all likelyhood, you'll be interested in the runs titled ",(0,a.kt)("inlineCode",{parentName:"p"},"<Env>_standalone"),", where ",(0,a.kt)("inlineCode",{parentName:"p"},"<Env>")," is the k8s cluster you are after."),(0,a.kt)("p",null,"Assuming you have:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"postgres server running locally & psql cli tool installed"),(0,a.kt)("li",{parentName:"ul"},"a user/role called ",(0,a.kt)("inlineCode",{parentName:"li"},"strapi")," "),(0,a.kt)("li",{parentName:"ul"},"a database ",(0,a.kt)("inlineCode",{parentName:"li"},"your_strapi_db"))),(0,a.kt)("p",null,"you can load the dump ",(0,a.kt)("inlineCode",{parentName:"p"},"newest-db-dump.sql")," like so:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"psql -h localhost -p 5432 -U strapi your_strapi_db < newest-db-dump.sql\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"It's not always necessary, but recommended, to have a role called ",(0,a.kt)("inlineCode",{parentName:"p"},"strapi")," on your local Postgres server when doing this with a Strapi db dump - as the tables may reference role with this name directly. Alternative might be editing the dump and renaming the role referenced to one you have available locally.")),(0,a.kt)("p",null,"To login into the db dumped this way, you may need to ask for access from the project lead."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"See ",(0,a.kt)("a",{parentName:"p",href:"/docs/recipes/sync-strapi-db-to-different-env"},"Sync Strapi database to different environment")," for guide on dumping live database directly from the server, instead of relying on the regular db dumps in pipeline.")))}d.isMDXComponent=!0}}]);